<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MJ√ñLLNIR - Programmation CrossFit √âlite</title>
    <!-- Chargement de Tailwind CSS pour un style moderne et responsive -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        /* Configuration de base Tailwind pour un th√®me sombre et puissant */
        :root {
            --primary-color: #B91C1C; /* Rouge Profond/Crimson */
            --secondary-color: #111827; /* Noir Profond */
            --accent-color: #FBBF24; /* Or/Jaune Vif (Acc√®s Rapide √† l'√©nergie) */
        }
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            background-color: var(--secondary-color);
            color: #E5E7EB; /* Texte principal en Gris Clair */
        }
        /* Style des boutons Call-to-Action */
        .btn-cta {
            @apply inline-flex items-center justify-center px-8 py-3 text-base font-bold leading-6 transition duration-150 ease-in-out bg-red-700 border border-transparent rounded-lg shadow-lg text-white hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-600 focus:ring-opacity-50 transform hover:scale-105;
        }
        /* Style pour l'image de fond du Hero (Dark/High Contrast) */
        #hero-section {
            background-image: url('https://placehold.co/1920x800/111827/FBBF24/png?text=MJ√ñLLNIR+PROGRAMMING+ELITE'); 
            background-size: cover;
            background-position: center;
        }
        /* Styles pour les ancres de navigation */
        .nav-link {
            @apply text-gray-300 hover:text-accent-color transition duration-300 font-semibold;
        }
        /* Texte de la banni√®re sur l'image */
        #hero-section h1, #hero-section p {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.9);
        }
        .text-accent {
            color: var(--accent-color);
        }
        /* Style pour la zone de r√©sultat de l'analyse */
        #analysis-result {
            white-space: pre-wrap; /* Preserve formatting from LLM response */
            text-align: left;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border-radius: 0.5rem;
            background-color: #1F2937; /* Plus clair que le background pour contraster */
            border-left: 4px solid var(--accent-color);
        }
    </style>
</head>
<body class="bg-gray-900 text-white">

    <!-- 1. HEADER & NAVIGATION (Fixe pour un acc√®s rapide) -->
    <header class="sticky top-0 z-10 bg-gray-800 shadow-xl border-b-2 border-red-700">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <a href="#accueil" class="text-3xl font-extrabold text-accent tracking-wider">MJ√ñLLNIR PRO</a>
            <div class="hidden md:flex space-x-8">
                <a href="#services" class="nav-link">Programmes</a>
                <a href="#coach" class="nav-link">Strat√®ge</a>
                <a href="#temoignages" class="nav-link">Performance</a>
                <a href="#analyse" class="nav-link text-accent">Analyse IA ‚ú®</a> <!-- Lien vers la nouvelle section -->
                <a href="#contact" class="btn-cta text-sm py-2 px-4 shadow-none bg-red-700 hover:bg-red-800">D√©marrer</a>
            </div>
            <!-- Menu mobile simple (non fonctionnel pour garder le code simple) -->
            <button class="md:hidden text-gray-300">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
            </button>
        </nav>
    </header>

    <!-- 2. SECTION HERO (Accueil) -->
    <section id="accueil" id="hero-section" class="flex items-center justify-center h-[80vh] text-white p-4">
        <div class="text-center bg-gray-900 bg-opacity-70 p-12 rounded-xl max-w-5xl border-l-4 border-accent-color">
            <h1 class="text-5xl md:text-7xl font-extrabold mb-4 uppercase tracking-tighter">
                PROGRAMMATION <span class="text-red-600">STRAT√âGIQUE</span> POUR ATTEINDRE L'√âLITE
            </h1>
            <p class="text-xl md:text-2xl mb-10 font-light text-gray-300">
                Coaching individuel affili√© Mj√∂llnir. Nous construisons votre force et votre strat√©gie pour les comp√©titions et les performances maximales.
            </p>
            <a href="#analyse" class="btn-cta">
                <span class="mr-2 text-accent">‚ö°</span> Analyser Ma Performance
            </a>
        </div>
    </section>

    <!-- 3. SECTION SERVICES (Les Offres - Piliers de Programmation) -->
    <section id="services" class="py-16 md:py-24 bg-gray-900">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-4xl font-extrabold text-center text-white mb-4">La Strat√©gie Mj√∂llnir</h2>
            <p class="text-xl text-center text-gray-400 mb-16">Nous optimisons chaque cycle d'entra√Ænement pour garantir votre progression.</p>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-10">
                <!-- Carte 1: Optimisation de la force -->
                <div class="bg-gray-800 p-8 rounded-xl shadow-2xl hover:shadow-red-900 transition duration-300 border-t-4 border-accent-color">
                    <div class="text-5xl text-accent mb-4">üèãÔ∏è</div>
                    <h3 class="text-2xl font-bold mb-3 text-white">Hyper-Sp√©cificit√© Force</h3>
                    <p class="text-gray-400">Des cycles de force bas√©s sur des donn√©es, ajustant les volumes et les intensit√©s pour briser les plateaux de PR.</p>
                </div>

                <!-- Carte 2: Gestion de la Fatigue -->
                <div class="bg-gray-800 p-8 rounded-xl shadow-2xl hover:shadow-red-900 transition duration-300 border-t-4 border-accent-color">
                    <div class="text-5xl text-accent mb-4">‚öôÔ∏è</div>
                    <h3 class="text-2xl font-bold mb-3 text-white">Strat√©gie & Comp√©tition</h3>
                    <p class="text-gray-400">Apprentissage de la gestion des WODs multi-modalit√©s, gestion du "pacing" et strat√©gies de transition en comp√©tition.</p>
                </div>

                <!-- Carte 3: √âvaluation et Correction -->
                <div class="bg-gray-800 p-8 rounded-xl shadow-2xl hover:shadow-red-900 transition duration-300 border-t-4 border-accent-color">
                    <div class="text-5xl text-accent mb-4">üî¨</div>
                    <h3 class="text-2xl font-bold mb-3 text-white">Analyse Biom√©trique</h3>
                    <p class="text-gray-400">√âvaluation des faiblesses techniques et des d√©s√©quilibres pour une prescription d'exercices correctifs pr√©cise et efficace.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 4. SECTION T√âMOIGNAGES (Preuve de Performance) -->
    <section id="temoignages" class="py-16 md:py-24 bg-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-4xl font-extrabold text-center text-white mb-16">La Preuve par les Athl√®tes</h2>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- T√©moignage 1 -->
                <blockquote class="bg-gray-900 p-6 rounded-lg shadow-xl border-l-4 border-red-700">
                    <p class="text-lg italic text-gray-300">"La programmation Mj√∂llnir est un changement de jeu. J'ai gagn√© en capacit√© de travail et la strat√©gie de 'pacing' m'a propuls√© au sommet du classement local."</p>
                    <footer class="mt-4 font-bold text-accent">‚Äî Marc, Qualifi√© pour les √âv√©nements Nationaux</footer>
                </blockquote>
                <!-- T√©moignage 2 -->
                <blockquote class="bg-gray-900 p-6 rounded-lg shadow-xl border-l-4 border-red-700">
                    <p class="text-lg italic text-gray-300">"J'ai toujours √©t√© bon en force, mais faible en endurance. L'analyse du coach a r√©√©quilibr√© mon profil en seulement 4 mois. Des r√©sultats concrets."</p>
                    <footer class="mt-4 font-bold text-accent">‚Äî L√©a, Athl√®te de niveau Interm√©diaire</footer>
                </blockquote>
                 <!-- T√©moignage 3 -->
                <blockquote class="bg-gray-900 p-6 rounded-lg shadow-xl border-l-4 border-red-700">
                    <p class="text-lg italic text-gray-300">"Ce n'est pas juste du coaching, c'est de la strat√©gie. J'ai appris √† m'entra√Æner plus intelligemment, pas seulement plus fort."</p>
                    <footer class="mt-4 font-bold text-accent">‚Äî Thomas, Ex-Comp√©titeur</footer>
                </blockquote>
            </div>
        </div>
    </section>

    <!-- 5. SECTION COACH (Cr√©dibilit√©) -->
    <section id="coach" class="py-16 md:py-24 bg-gray-900">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-4xl font-extrabold text-center text-white mb-12">Votre Strat√®ge de Performance</h2>
            <div class="md:flex items-center justify-center space-y-8 md:space-y-0 md:space-x-12">
                <!-- Placeholder Image -->
                <div class="flex-shrink-0">
                    <img class="w-64 h-64 object-cover rounded-full shadow-2xl border-4 border-accent-color mx-auto" 
                         src="https://placehold.co/256x256/1F2937/FBBF24?text=Coach" 
                         alt="Photo du coach professionnel">
                </div>
                <!-- Description -->
                <div class="max-w-2xl text-center md:text-left">
                    <h3 class="text-3xl font-bold text-white mb-3">Alexandre "Le Strat√®ge" Dubois</h3>
                    <p class="text-lg text-gray-300 mb-4">
                        <span class="font-semibold text-red-600">Coach Principal Affili√© Mj√∂llnir,</span> Level 3 Trainer (CF-L3), Expert en Programmation et Gestion du Volume.
                    </p>
                    <p class="text-gray-400">
                        Mon r√¥le est de traduire les principes de l'√©lite de la programmation Mj√∂llnir √† votre niveau individuel. Nous maximiserons les gains tout en g√©rant la fatigue et en optimisant vos cycles de comp√©tition. Votre succ√®s est une question de planification.
                    </p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- 6. ANALYSE STRAT√âGIQUE IA (Gemini API Feature) -->
    <section id="analyse" class="py-16 md:py-24 bg-gray-800 border-t-2 border-red-700">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-4xl font-extrabold text-white mb-4">Analyse Strat√©gique Instantan√©e ‚ú®</h2>
            <p class="text-xl text-gray-300 mb-8">
                D√©crivez votre situation actuelle (points forts, faiblesses, objectifs pour les 6 prochains mois). Notre IA vous fournira une premi√®re piste de programmation.
            </p>

            <textarea id="athlete-input" 
                      class="w-full h-32 p-4 rounded-lg bg-gray-700 text-white border border-gray-600 focus:ring-red-700 focus:border-red-700 mb-6"
                      placeholder="Ex: Mon PR en Snatch est de 80kg, mais mon endurance sur les WODs longs est ma plus grande faiblesse. Je vise une qualification √† l'Open."
                      required></textarea>
            
            <button id="analyze-button" class="btn-cta bg-accent-color text-gray-900 hover:bg-yellow-400">
                <span class="mr-2">üöÄ</span> G√©n√©rer l'Analyse Mj√∂llnir
            </button>
            
            <div id="loading-indicator" class="mt-4 text-accent hidden">
                Analyse en cours... Notre IA √©value votre strat√©gie.
            </div>

            <div id="analysis-result" class="text-gray-200 hidden">
                <!-- Le r√©sultat de l'API Gemini sera inject√© ici -->
            </div>
        </div>
    </section>

    <!-- 7. FOOTER & CALL TO ACTION FINAL (Contact/R√©servation) -->
    <footer id="contact" class="py-16 bg-gray-900 text-white border-t-2 border-red-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-4xl font-extrabold text-white mb-4">Passez √† la Programmation Individuelle</h2>
            <p class="text-xl text-gray-300 mb-10">R√©servez votre bilan technique approfondi avec le Coach Alexandre. Place limit√©e.</p>
            
            <!-- CTA vers un syst√®me de r√©servation externe (Calendly, etc.) -->
            <a href="#lien-reservation-externe" class="btn-cta bg-red-700 hover:bg-red-800">
                <span class="mr-2">‚öîÔ∏è</span> Je R√©serve mon Bilan Strat√©gique
            </a>

            <!-- Informations de contact simples -->
            <div class="mt-12 text-gray-400 text-sm space-y-2">
                <p>Affili√© √† la programmation Mj√∂llnir. | Email: contact@mjollnirpro.com</p>
                <p>T√©l√©phone: +33 6 00 00 00 00</p>
                <p class="pt-4">&copy; 2025 MJ√ñLLNIR PRO Coaching. Tous droits r√©serv√©s.</p>
            </div>
        </div>
    </footer>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const analyzeButton = document.getElementById('analyze-button');
            const inputField = document.getElementById('athlete-input');
            const resultDiv = document.getElementById('analysis-result');
            const loadingIndicator = document.getElementById('loading-indicator');
            
            // Constantes de l'API Gemini
            const apiKey = ""; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

            // Fonction pour l'appel API avec Backoff exponentiel
            async function fetchWithExponentialBackoff(payload, maxRetries = 5) {
                for (let attempt = 0; attempt < maxRetries; attempt++) {
                    try {
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (response.status === 429 && attempt < maxRetries - 1) {
                            // Too Many Requests (429), retry after a delay
                            const delay = Math.pow(2, attempt) * 1000 + Math.random() * 1000;
                            await new Promise(resolve => setTimeout(resolve, delay));
                            continue;
                        }
                        
                        if (!response.ok) {
                             throw new Error(\`HTTP error! status: \${response.status}\`);
                        }

                        return response.json();

                    } catch (error) {
                         // Only retry on network errors or 429
                         if (attempt === maxRetries - 1) {
                            throw error;
                         }
                    }
                }
            }

            analyzeButton.addEventListener('click', async () => {
                const userQuery = inputField.value.trim();

                if (userQuery.length < 20) {
                    resultDiv.textContent = "Veuillez fournir plus de d√©tails sur vos performances et objectifs (minimum 20 caract√®res).";
                    resultDiv.classList.remove('hidden');
                    return;
                }

                // Afficher le chargement
                resultDiv.classList.add('hidden');
                loadingIndicator.classList.remove('hidden');
                analyzeButton.disabled = true;

                // Le prompt syst√®me d√©finit le r√¥le du mod√®le
                const systemPrompt = "Vous √™tes un strat√®ge de programmation CrossFit √©lite affili√© √† Mj√∂llnir. Analysez le besoin de l'athl√®te et fournissez une analyse concise et structur√©e en fran√ßais. Le ton doit √™tre professionnel, technique et motivant. Formatez la r√©ponse avec des titres en gras, des listes et des sauts de ligne pour la lisibilit√©. Ne donnez pas de programme complet, mais des axes d'am√©lioration strat√©giques.";
                
                // Le prompt utilisateur combine l'instruction et l'entr√©e utilisateur
                const fullPrompt = `Analyse de performance pour athl√®te CrossFit:\n\nMon profil et mes objectifs:\n${userQuery}`;

                const payload = {
                    contents: [{ parts: [{ text: fullPrompt }] }],
                    systemInstruction: { parts: [{ text: systemPrompt }] },
                };

                try {
                    const result = await fetchWithExponentialBackoff(payload);
                    const generatedText = result.candidates?.[0]?.content?.parts?.[0]?.text;

                    if (generatedText) {
                        // Nettoyer le texte pour l'affichage (remplacer les sauts de ligne pour les ins√©rer en HTML)
                        resultDiv.textContent = generatedText;
                    } else {
                        resultDiv.textContent = "Erreur: Impossible d'obtenir une analyse. Veuillez r√©essayer.";
                    }
                } catch (error) {
                    console.error("Gemini API Error:", error);
                    resultDiv.textContent = "Erreur de connexion avec l'API. Veuillez v√©rifier votre r√©seau ou r√©essayer plus tard.";
                } finally {
                    // Masquer le chargement et afficher le r√©sultat
                    loadingIndicator.classList.add('hidden');
                    resultDiv.classList.remove('hidden');
                    analyzeButton.disabled = false;
                }
            });
        });
    </script>

</body>
</html>